# Development Tools Setup

## Installed Tools

### Rust Toolchain
- **rustc**: Rust compiler (stable)
- **rustc (nightly)**: Nightly toolchain for benchmarks
- **cargo**: Rust package manager
- **rustfmt**: Code formatter
- **clippy**: Linter

### Cargo Development Tools
- **cargo-watch**: Continuous build on file changes
  - Usage: `cargo watch -x build` or `scripts/build.sh --watch`
- **cargo-tarpaulin**: Code coverage analysis
  - Usage: `cargo tarpaulin --workspace` or `scripts/verify.sh`
- **cargo-fuzz**: Fuzzing support
  - Usage: `cd keyrx_core/fuzz && cargo fuzz run fuzz_target_1`
- **wasm-pack**: WASM compilation
  - Usage: `wasm-pack build keyrx_core --target web`

### System Tools
- **git**: Version control
- **jq**: JSON processor for parsing script output
- **bats**: Bash Automated Testing System

### Build Dependencies
- **build-essential**: C/C++ compiler
- **pkg-config**: Package config tool
- **libssl-dev**: OpenSSL development files
- **libevdev-dev**: evdev development files (Linux keyboard input)
- **libudev-dev**: udev development files

## Git Hooks
- **pre-commit**: Runs `scripts/verify.sh --quiet` before every commit
  - Checks: clippy, rustfmt, tests, coverage
  - Blocks commit if quality checks fail

## Quick Commands

```bash
# Build workspace
make build

# Run all quality checks
make verify

# Run tests
make test

# Launch daemon
make launch

# Clean build artifacts
make clean

# Reinstall tools (if needed)
make setup
```

## Troubleshooting

### cargo-tarpaulin fails on coverage
- Install libssl-dev: `sudo apt-get install libssl-dev`
- Rebuild: `cargo clean && cargo install cargo-tarpaulin --force`

### cargo-watch not found
- Reinstall: `cargo install cargo-watch --force`

### Pre-commit hook not running
- Reinstall hooks: `scripts/setup_hooks.sh`
- Verify: `ls -la .git/hooks/pre-commit`

### BATS tests fail
- Install BATS: `sudo apt-get install bats`
- Verify: `bats --version`

## AI Agent Notes

All tools are CLI-based and automation-friendly:
- Scripts output structured logs with status markers
- JSON mode available: `scripts/build.sh --json`
- Exit codes: 0 = success, 1 = failure, 2 = warning
- Pre-commit hooks enforce quality automatically
- All operations are deterministic and reproducible

See `.claude/CLAUDE.md` for complete AI agent development guide.
