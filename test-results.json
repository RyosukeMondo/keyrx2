{
  "version": "1.0",
  "timestamp": "2026-01-21T16:50:13.970Z",
  "suite": "Automated API E2E Tests",
  "summary": {
    "total": 83,
    "passed": 27,
    "failed": 56,
    "skipped": 0,
    "errors": 0,
    "duration": 29367,
    "passRate": 32.53
  },
  "results": [
    {
      "id": "health-001",
      "name": "GET /api/health - Daemon healthy",
      "status": "pass",
      "duration": 4
    },
    {
      "id": "version-001",
      "name": "GET /api/version - Get daemon version",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "status-001",
      "name": "GET /api/status - Daemon running without active profile",
      "status": "fail",
      "duration": 2,
      "error": "Daemon not in expected running state"
    },
    {
      "id": "profiles-001",
      "name": "GET /api/profiles - List profiles",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "profiles-002",
      "name": "GET /api/profiles/active - No active profile",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "profiles-003",
      "name": "POST /api/profiles - Create new profile",
      "status": "pass",
      "duration": 5
    },
    {
      "id": "profiles-004",
      "name": "POST /api/profiles - Reject duplicate profile",
      "status": "pass",
      "duration": 3
    },
    {
      "id": "profiles-005",
      "name": "POST /api/profiles/:name/activate - Activate existing profile",
      "status": "pass",
      "duration": 3
    },
    {
      "id": "profiles-006",
      "name": "POST /api/profiles/:name/activate - Reject nonexistent profile",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "profiles-007",
      "name": "DELETE /api/profiles/:name - Delete existing profile",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "profiles-008",
      "name": "DELETE /api/profiles/:name - Reject nonexistent profile",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "profiles-009",
      "name": "GET /api/profiles/:name - Get profile configuration",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Profile not found: test-profile-get-config\"},\"success\":false}"
    },
    {
      "id": "profiles-010",
      "name": "PUT /api/profiles/:name - Update profile configuration",
      "status": "fail",
      "duration": 2,
      "error": "HTTP 422: \"Failed to deserialize the JSON body into the target type: missing field `config` at line 1 column 47\""
    },
    {
      "id": "devices-001",
      "name": "GET /api/devices - List all devices",
      "status": "pass",
      "duration": 524
    },
    {
      "id": "devices-002",
      "name": "PATCH /api/devices/:id - Update device configuration (enabled)",
      "status": "fail",
      "duration": 1362,
      "error": "HTTP 500: {\"error\":{\"code\":\"REGISTRY_CORRUPTED\",\"message\":\"Registry corrupted: Invalid device name: Device name contains invalid characters (only alphanumeric, space, dash, underscore allowed)\"},\"success\":false}"
    },
    {
      "id": "devices-003",
      "name": "PATCH /api/devices/:id - Reject nonexistent device",
      "status": "fail",
      "duration": 1,
      "error": "Nonexistent device update not rejected correctly"
    },
    {
      "id": "metrics-001",
      "name": "GET /api/metrics/latency - Get latency metrics",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 503: {\"error\":{\"code\":\"SOCKET_NOT_CONNECTED\",\"message\":\"Socket not connected\"},\"success\":false}"
    },
    {
      "id": "layouts-001",
      "name": "GET /api/layouts - Get available keyboard layouts",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "integration-001",
      "name": "Profile lifecycle - Create, Activate, Deactivate, Delete",
      "status": "fail",
      "duration": 4,
      "error": "Profile lifecycle workflow failed"
    },
    {
      "id": "integration-002",
      "name": "Device configuration - List, Update, Verify",
      "status": "fail",
      "duration": 424,
      "error": "HTTP 500: {\"error\":{\"code\":\"REGISTRY_CORRUPTED\",\"message\":\"Registry corrupted: Invalid device name: Device name contains invalid characters (only alphanumeric, space, dash, underscore allowed)\"},\"success\":false}"
    },
    {
      "id": "health-007",
      "name": "GET /api/daemon/state - Get full daemon state",
      "status": "fail",
      "duration": 2,
      "error": "HTTP 503: {\"error\":{\"code\":\"SOCKET_NOT_CONNECTED\",\"message\":\"Socket not connected\"},\"success\":false}"
    },
    {
      "id": "metrics-002",
      "name": "GET /api/metrics/events - Get event log with default limit",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 503: {\"error\":{\"code\":\"SOCKET_NOT_CONNECTED\",\"message\":\"Socket not connected\"},\"success\":false}"
    },
    {
      "id": "metrics-002b",
      "name": "GET /api/metrics/events?count=10 - Get event log with custom limit",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 503: {\"error\":{\"code\":\"SOCKET_NOT_CONNECTED\",\"message\":\"Socket not connected\"},\"success\":false}"
    },
    {
      "id": "metrics-003",
      "name": "DELETE /api/metrics/events - Clear event log (not implemented)",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "devices-004",
      "name": "PUT /api/devices/:id/name - Rename device (success)",
      "status": "fail",
      "duration": 1184,
      "error": "HTTP 404: \"404 Not Found\""
    },
    {
      "id": "devices-004b",
      "name": "PUT /api/devices/:id/name - Rename nonexistent device (404)",
      "status": "fail",
      "duration": 1,
      "error": "Expected 404 for nonexistent device, got 200"
    },
    {
      "id": "devices-004c",
      "name": "PUT /api/devices/:id/name - Reject empty name (400)",
      "status": "fail",
      "duration": 730,
      "error": "Expected 400 for empty name, got 200"
    },
    {
      "id": "devices-004d",
      "name": "PUT /api/devices/:id/name - Reject too long name (400)",
      "status": "fail",
      "duration": 825,
      "error": "Expected 400 for name > 100 chars, got 200"
    },
    {
      "id": "devices-005",
      "name": "PUT /api/devices/:id/layout - Set device layout (success)",
      "status": "fail",
      "duration": 754,
      "error": "HTTP 404: \"404 Not Found\""
    },
    {
      "id": "devices-005b",
      "name": "PUT /api/devices/:id/layout - Set layout on nonexistent device (404)",
      "status": "fail",
      "duration": 1,
      "error": "Expected 404 or 500 for nonexistent device, got 200"
    },
    {
      "id": "devices-005c",
      "name": "PUT /api/devices/:id/layout - Reject empty layout (400)",
      "status": "fail",
      "duration": 753,
      "error": "Expected 400 for empty layout, got 200"
    },
    {
      "id": "devices-005d",
      "name": "PUT /api/devices/:id/layout - Reject too long layout name (400)",
      "status": "fail",
      "duration": 663,
      "error": "Expected 400 for layout name > 50 chars, got 200"
    },
    {
      "id": "devices-006",
      "name": "GET /api/devices/:id/layout - Get device layout (success)",
      "status": "fail",
      "duration": 367,
      "error": "HTTP 404: \"404 Not Found\""
    },
    {
      "id": "devices-006b",
      "name": "GET /api/devices/:id/layout - Get layout for nonexistent device (404)",
      "status": "fail",
      "duration": 2,
      "error": "Expected 404 or 500 for nonexistent device, got 200"
    },
    {
      "id": "devices-007",
      "name": "DELETE /api/devices/:id - Forget nonexistent device (404)",
      "status": "fail",
      "duration": 0,
      "error": "Expected 404 or 500 for nonexistent device, got 200"
    },
    {
      "id": "profiles-011",
      "name": "POST /api/profiles/:name/duplicate - Duplicate profile (success)",
      "status": "fail",
      "duration": 2,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Invalid profile name: Name too long (max 32 chars)\"},\"success\":false}"
    },
    {
      "id": "profiles-011b",
      "name": "POST /api/profiles/:name/duplicate - Duplicate nonexistent profile (404)",
      "status": "fail",
      "duration": 1,
      "error": "Expected 404 or 500 for nonexistent profile, got 200"
    },
    {
      "id": "profiles-011c",
      "name": "POST /api/profiles/:name/duplicate - Duplicate with name conflict (409)",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Invalid profile name: Name too long (max 32 chars)\"},\"success\":false}"
    },
    {
      "id": "profiles-012",
      "name": "PUT /api/profiles/:name/rename - Rename profile (success)",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Invalid profile name: Name too long (max 32 chars)\"},\"success\":false}"
    },
    {
      "id": "profiles-012b",
      "name": "PUT /api/profiles/:name/rename - Rename nonexistent profile (404)",
      "status": "fail",
      "duration": 1,
      "error": "Expected 404 or 500 for nonexistent profile, got 200"
    },
    {
      "id": "profiles-012c",
      "name": "PUT /api/profiles/:name/rename - Rename with invalid name (400)",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Invalid profile name: Name too long (max 32 chars)\"},\"success\":false}"
    },
    {
      "id": "profiles-012d",
      "name": "PUT /api/profiles/:name/rename - Rename with name conflict (409)",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Invalid profile name: Name too long (max 32 chars)\"},\"success\":false}"
    },
    {
      "id": "profiles-013",
      "name": "POST /api/profiles/:name/validate - Validate valid profile (success)",
      "status": "fail",
      "duration": 2,
      "error": "HTTP 400: {\"error\":{\"code\":\"PROFILE_ERROR\",\"message\":\"Profile error: Invalid profile name: Name too long (max 32 chars)\"},\"success\":false}"
    },
    {
      "id": "profiles-013b",
      "name": "POST /api/profiles/:name/validate - Validate nonexistent profile (404)",
      "status": "fail",
      "duration": 1,
      "error": "Expected 404 or 500 for nonexistent profile, got 200"
    },
    {
      "id": "config-001",
      "name": "GET /api/config - Get current configuration",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"GENERATOR_ERROR\",\"message\":\"Generator error: Device block not found\"},\"success\":false}"
    },
    {
      "id": "config-002",
      "name": "PUT /api/config - Update configuration with valid Rhai",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "config-002b",
      "name": "PUT /api/config - Update configuration with invalid syntax",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "config-003",
      "name": "POST /api/config/key-mappings - Add simple key mapping",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"GENERATOR_ERROR\",\"message\":\"Generator error: Device block not found\"},\"success\":false}"
    },
    {
      "id": "config-003b",
      "name": "POST /api/config/key-mappings - Add tap-hold mapping",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"GENERATOR_ERROR\",\"message\":\"Generator error: Device block not found\"},\"success\":false}"
    },
    {
      "id": "config-003c",
      "name": "POST /api/config/key-mappings - Invalid action type",
      "status": "fail",
      "duration": 1,
      "error": "Expected error response for invalid action type"
    },
    {
      "id": "config-003d",
      "name": "POST /api/config/key-mappings - Missing required field",
      "status": "fail",
      "duration": 2,
      "error": "Expected error response for missing field"
    },
    {
      "id": "config-004",
      "name": "DELETE /api/config/key-mappings/:id - Delete existing mapping",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"GENERATOR_ERROR\",\"message\":\"Generator error: Device block not found\"},\"success\":false}"
    },
    {
      "id": "config-004b",
      "name": "DELETE /api/config/key-mappings/:id - Invalid ID format",
      "status": "fail",
      "duration": 0,
      "error": "Expected error response for invalid ID format"
    },
    {
      "id": "config-004c",
      "name": "DELETE /api/config/key-mappings/:id - Non-existent mapping",
      "status": "fail",
      "duration": 1,
      "error": "Expected error response for non-existent mapping"
    },
    {
      "id": "config-005",
      "name": "GET /api/layers - List all layers",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"GENERATOR_ERROR\",\"message\":\"Generator error: Device block not found\"},\"success\":false}"
    },
    {
      "id": "layouts-002",
      "name": "GET /api/layouts/:name - Get layout details",
      "status": "fail",
      "duration": 1,
      "error": "Expected KLE JSON array format"
    },
    {
      "id": "layouts-002b",
      "name": "GET /api/layouts/:name - Not found layout",
      "status": "fail",
      "duration": 1,
      "error": "Expected 404 status, got undefined"
    },
    {
      "id": "macros-001",
      "name": "POST /api/macros/start-recording - Start recording successfully",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "macros-001b",
      "name": "POST /api/macros/start-recording - Fail when already recording",
      "status": "fail",
      "duration": 2,
      "error": "Expected status 400 (Bad Request), got undefined"
    },
    {
      "id": "macros-002",
      "name": "POST /api/macros/stop-recording - Stop recording successfully",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "macros-002b",
      "name": "POST /api/macros/stop-recording - Fail when not recording",
      "status": "fail",
      "duration": 1,
      "error": "Expected status 400 (Bad Request), got undefined"
    },
    {
      "id": "macros-003",
      "name": "GET /api/macros/recorded-events - Get events while not recording",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "macros-003b",
      "name": "GET /api/macros/recorded-events - Get events while recording",
      "status": "pass",
      "duration": 2
    },
    {
      "id": "macros-004",
      "name": "POST /api/macros/clear - Clear events successfully",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "macros-004b",
      "name": "POST /api/macros/clear - Verify events are cleared",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "simulator-001",
      "name": "POST /api/simulator/events - Simulate single key press/release",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "simulator-001b",
      "name": "POST /api/simulator/events - Simulate key sequence",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "simulator-001c",
      "name": "POST /api/simulator/events - Use built-in scenario",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "simulator-001d",
      "name": "POST /api/simulator/events - Fail with no events or scenario",
      "status": "fail",
      "duration": 1,
      "error": "Expected status 400 (Bad Request), got undefined"
    },
    {
      "id": "simulator-001e",
      "name": "POST /api/simulator/events - Fail with unknown scenario",
      "status": "fail",
      "duration": 1,
      "error": "Expected status 400 (Bad Request), got undefined"
    },
    {
      "id": "simulator-002",
      "name": "POST /api/simulator/reset - Reset simulator state",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "simulator-002b",
      "name": "POST /api/simulator/reset - Verify idempotency",
      "status": "pass",
      "duration": 1
    },
    {
      "id": "workflow-002",
      "name": "Profile duplicate → rename → activate workflow",
      "status": "fail",
      "duration": 7,
      "error": "HTTP 503: {\"error\":{\"code\":\"SOCKET_NOT_CONNECTED\",\"message\":\"Socket not connected\"},\"success\":false}"
    },
    {
      "id": "workflow-003",
      "name": "Profile validation → fix → activate workflow",
      "status": "fail",
      "duration": 3,
      "error": "HTTP 422: \"Failed to deserialize the JSON body into the target type: missing field `config` at line 1 column 104\""
    },
    {
      "id": "workflow-004",
      "name": "Device rename → layout change → disable workflow",
      "status": "fail",
      "duration": 1651,
      "error": "[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"success\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"devices\",\n      0,\n      \"layout\"\n    ],\n    \"message\": \"Expected string, received null\"\n  }\n]"
    },
    {
      "id": "workflow-005",
      "name": "Config update → add mappings → verify layers workflow",
      "status": "fail",
      "duration": 1,
      "error": "HTTP 400: {\"error\":{\"code\":\"GENERATOR_ERROR\",\"message\":\"Generator error: Device block not found\"},\"success\":false}"
    },
    {
      "id": "workflow-006",
      "name": "Macro record → simulate → playback workflow",
      "status": "fail",
      "duration": 3,
      "error": "HTTP 400: \"Failed to parse the request body as JSON: events[0].event_type: expected value at line 1 column 40\""
    },
    {
      "id": "workflow-007",
      "name": "Simulator event → mapping → output workflow",
      "status": "fail",
      "duration": 2,
      "error": "HTTP 400: {\"error\":{\"code\":\"INVALID_REQUEST\",\"message\":\"Invalid request: Invalid template: '\\n// Test profile for simulator workflow\\nbase_layer = \\\"base\\\";\\n\\n[keymap.base]\\n\\\"a\\\" = \\\"b\\\"  // Remap 'a' to 'b'\\n'. Valid templates: blank, simple_remap, capslock_escape, vim_navigation, gaming\"},\"success\":false}"
    },
    {
      "id": "websocket-001",
      "name": "WebSocket - Connect and disconnect lifecycle",
      "status": "pass",
      "duration": 5
    },
    {
      "id": "websocket-002",
      "name": "WebSocket - Subscribe to channel and receive acknowledgment",
      "status": "fail",
      "duration": 5003,
      "error": "Subscription failed: Subscription timeout for channel: devices (TimeoutError)"
    },
    {
      "id": "websocket-003",
      "name": "WebSocket - Receive device event notification",
      "status": "fail",
      "duration": 5003,
      "error": "Event notification failed: Subscription timeout for channel: devices (TimeoutError)"
    },
    {
      "id": "websocket-004",
      "name": "WebSocket - Receive profile event notification",
      "status": "fail",
      "duration": 5004,
      "error": "Profile event notification failed: Subscription timeout for channel: profiles (TimeoutError)"
    },
    {
      "id": "websocket-005",
      "name": "WebSocket - Reconnection and subscription restoration",
      "status": "fail",
      "duration": 5002,
      "error": "Reconnection test failed: Subscription timeout for channel: devices (TimeoutError)"
    }
  ]
}